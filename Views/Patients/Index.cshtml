@model IEnumerable<HospitalManagement.Models.Patient>

@{
    ViewData["Title"] = "Patients";
}

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <div class="page-header animated fadeInDown">
                <h1 class="display-4 text-primary font-weight-bold">Patients</h1>
                <p class="lead text-muted">Manage your patient records efficiently</p>
            </div>
            
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a asp-action="Create" class="btn btn-primary btn-lg shadow-sm animated bounceIn">
                    <i class="fas fa-plus-circle mr-2"></i>Create New
                </a>
                
                <div class="search-box animated fadeIn">
                    <input type="text" class="form-control" placeholder="Search patients..." id="searchInput">
                    <button class="btn btn-outline-secondary" type="button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm border-0 animated fadeInUp">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="bg-light-primary">
                                <tr>
                                    <th class="py-3">
                                        @Html.DisplayNameFor(model => model.Name)
                                    </th>
                                    <th class="py-3">
                                        @Html.DisplayNameFor(model => model.Gender)
                                    </th>
                                    <th class="py-3">
                                        @Html.DisplayNameFor(model => model.DateOfBirth)
                                    </th>
                                    <th class="py-3">
                                        @Html.DisplayNameFor(model => model.PhoneNumber)
                                    </th>
                                    <th class="py-3 text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr class="animated fadeInRight">
                                        <td class="align-middle font-weight-bold">
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-sm bg-soft-primary rounded-circle mr-3 d-flex align-items-center justify-content-center">
                                                    <i class="fas fa-user text-primary"></i>
                                                </div>
                                                @Html.DisplayFor(modelItem => item.Name)
                                            </div>
                                        </td>
                                        <td class="align-middle">
                                            <span class="badge @(item.Gender == "Male" ? "badge-info" : "badge-pink") p-2">
                                                @Html.DisplayFor(modelItem => item.Gender)
                                            </span>
                                        </td>
                                        <td class="align-middle">
                                            <span class="text-muted">
                                                @item.DateOfBirth.ToString("dd/MM/yyyy")
                                            </span>
                                        </td>
                                        <td class="align-middle">
                                            <a href="tel:@item.PhoneNumber" class="text-primary">
                                                <i class="fas fa-phone-alt mr-2"></i>
                                                @Html.DisplayFor(modelItem => item.PhoneNumber)
                                            </a>
                                        </td>
                                        <td class="align-middle text-right">
                                            <div class="btn-group" role="group">
                                                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-soft-warning shadow-none animated-hover" title="Edit">
                                                    <i class="fas fa-edit"></i>
                                                </a>
                                                <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-sm btn-soft-info shadow-none animated-hover" title="Details">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                                <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-soft-danger shadow-none animated-hover" title="Delete">
                                                    <i class="fas fa-trash-alt"></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="mt-4 text-center animated fadeIn delay-1s">
                <p class="text-muted">Showing @Model.Count() patients</p>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #f8f9fc;
            --danger-color: #e74a3b;
            --warning-color: #f6c23e;
            --info-color: #36b9cc;
            --pink-color: #e83e8c;
        }
        
        body {
            background-color: #f8f9fc;
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        .bg-light-primary {
            background-color: rgba(78, 115, 223, 0.1);
        }
        
        .card {
            border: none;
            border-radius: 0.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
        }
        
        .table th {
            border-top: none;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            color: #6e707e;
        }
        
        .table td {
            vertical-align: middle;
            border-top: 1px solid #e3e6f0;
        }
        
        .badge-info {
            background-color: var(--info-color);
        }
        
        .badge-pink {
            background-color: var(--pink-color);
        }
        
        .btn-soft-warning {
            background-color: rgba(246, 194, 62, 0.2);
            color: #856404;
        }
        
        .btn-soft-info {
            background-color: rgba(54, 185, 204, 0.2);
            color: #0c5460;
        }
        
        .btn-soft-danger {
            background-color: rgba(231, 74, 59, 0.2);
            color: #721c24;
        }
        
        .avatar-sm {
            width: 36px;
            height: 36px;
            font-size: 1rem;
        }
        
        .search-box {
            position: relative;
            width: 300px;
        }
        
        .search-box input {
            padding-right: 40px;
            border-radius: 20px;
        }
        
        .search-box button {
            position: absolute;
            right: 5px;
            top: 5px;
            height: 30px;
            width: 30px;
            border-radius: 50%;
            background: transparent;
            border: none;
            color: #6e707e;
        }
        
        .animated-hover {
            transition: all 0.3s ease;
        }
        
        .animated-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .fadeInRight {
            animation-delay: calc(var(--animation-order) * 100ms);
        }
        
        @@media (max-width: 768px) {
            .search-box {
                width: 100%;
                margin-top: 15px;
            }
            
            .d-flex.justify-content-between {
                flex-direction: column;
            }
            
            .table-responsive {
                border: none;
            }
            
            .btn-group {
                display: flex;
                flex-direction: column;
            }
            
            .btn-group a {
                margin-bottom: 5px;
            }
        }
    </style>
}

@section Scripts {
    <script>
        // Add animation order to table rows
        document.addEventListener('DOMContentLoaded', function() {
            const rows = document.querySelectorAll('tbody tr');
            rows.forEach((row, index) => {
                row.style.setProperty('--animation-order', index);
            });
            
            // Simple search functionality
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keyup', function() {
                const filter = this.value.toLowerCase();
                const rows = document.querySelectorAll('tbody tr');
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(filter)) {
                        row.style.display = '';
                        row.classList.add('animate__animated', 'animate__fadeIn');
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
    </script>
}